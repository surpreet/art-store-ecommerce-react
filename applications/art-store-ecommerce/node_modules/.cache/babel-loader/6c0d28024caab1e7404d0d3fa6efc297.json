{"ast":null,"code":"import { db } from \"./firebase\";\nexport async function getUser(uid) {\n  const userRef = db.ref(`users/${uid}`);\n  const userSnapshot = await userRef.once(\"value\");\n  return userSnapshot.val();\n}\nexport function addUser(user) {\n  const userRef = db.ref(`users/${user.uid}`);\n  return userRef.set(user);\n}\nexport function addItemToCart(userId, itemId) {\n  const cartRef = db.ref(`users/${userId}/cart`);\n  const itemRef = cartRef.push();\n  itemRef.set({\n    itemId,\n    quantity: 1\n  });\n  return itemRef;\n}\nexport async function getCartItems(userId) {\n  const data = [];\n  const cartRef = db.ref(`users/${userId}/cart`);\n  const dataSnapshot = await cartRef.once(\"value\");\n  dataSnapshot.forEach(itemSnapshot => {\n    const item = itemSnapshot.val();\n    data.push(item);\n  });\n  return data;\n}","map":{"version":3,"sources":["C:/Users/Arezoo/Desktop/comit/comit-final-project/applications/art-store-ecommerce/src/firebase/userRepository.js"],"names":["db","getUser","uid","userRef","ref","userSnapshot","once","val","addUser","user","set","addItemToCart","userId","itemId","cartRef","itemRef","push","quantity","getCartItems","data","dataSnapshot","forEach","itemSnapshot","item"],"mappings":"AAAA,SAASA,EAAT,QAAmB,YAAnB;AAEA,OAAO,eAAeC,OAAf,CAAuBC,GAAvB,EAA4B;AACjC,QAAMC,OAAO,GAAGH,EAAE,CAACI,GAAH,CAAQ,SAAQF,GAAI,EAApB,CAAhB;AACA,QAAMG,YAAY,GAAG,MAAMF,OAAO,CAACG,IAAR,CAAa,OAAb,CAA3B;AACA,SAAOD,YAAY,CAACE,GAAb,EAAP;AACD;AAED,OAAO,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AAC5B,QAAMN,OAAO,GAAGH,EAAE,CAACI,GAAH,CAAQ,SAAQK,IAAI,CAACP,GAAI,EAAzB,CAAhB;AACA,SAAOC,OAAO,CAACO,GAAR,CAAYD,IAAZ,CAAP;AACD;AAED,OAAO,SAASE,aAAT,CAAuBC,MAAvB,EAA+BC,MAA/B,EAAuC;AAC5C,QAAMC,OAAO,GAAGd,EAAE,CAACI,GAAH,CAAQ,SAAQQ,MAAO,OAAvB,CAAhB;AACA,QAAMG,OAAO,GAAGD,OAAO,CAACE,IAAR,EAAhB;AACAD,EAAAA,OAAO,CAACL,GAAR,CAAY;AAAEG,IAAAA,MAAF;AAAUI,IAAAA,QAAQ,EAAE;AAApB,GAAZ;AACA,SAAOF,OAAP;AACD;AAED,OAAO,eAAeG,YAAf,CAA4BN,MAA5B,EAAoC;AACzC,QAAMO,IAAI,GAAG,EAAb;AACA,QAAML,OAAO,GAAGd,EAAE,CAACI,GAAH,CAAQ,SAAQQ,MAAO,OAAvB,CAAhB;AACA,QAAMQ,YAAY,GAAG,MAAMN,OAAO,CAACR,IAAR,CAAa,OAAb,CAA3B;AACAc,EAAAA,YAAY,CAACC,OAAb,CAAsBC,YAAD,IAAkB;AACrC,UAAMC,IAAI,GAAGD,YAAY,CAACf,GAAb,EAAb;AACAY,IAAAA,IAAI,CAACH,IAAL,CAAUO,IAAV;AACD,GAHD;AAIA,SAAOJ,IAAP;AACD","sourcesContent":["import { db } from \"./firebase\";\r\n\r\nexport async function getUser(uid) {\r\n  const userRef = db.ref(`users/${uid}`);\r\n  const userSnapshot = await userRef.once(\"value\");\r\n  return userSnapshot.val();\r\n}\r\n\r\nexport function addUser(user) {\r\n  const userRef = db.ref(`users/${user.uid}`);\r\n  return userRef.set(user);\r\n}\r\n\r\nexport function addItemToCart(userId, itemId) {\r\n  const cartRef = db.ref(`users/${userId}/cart`);\r\n  const itemRef = cartRef.push();\r\n  itemRef.set({ itemId, quantity: 1 });\r\n  return itemRef;\r\n}\r\n\r\nexport async function getCartItems(userId) {\r\n  const data = [];\r\n  const cartRef = db.ref(`users/${userId}/cart`);\r\n  const dataSnapshot = await cartRef.once(\"value\");\r\n  dataSnapshot.forEach((itemSnapshot) => {\r\n    const item = itemSnapshot.val();\r\n    data.push(item);\r\n  });\r\n  return data;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}